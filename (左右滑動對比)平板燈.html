<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  /* 歸零設定，確保滿版 */
  body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; }
  
  .gw-slider-container {
    position: relative;
    width: 100%;
    /* 這裡不用設 max-width，因為外層 iframe 會限制 */
    height: 100%; /* 跟隨 iframe 高度 */
    margin: 0;
    cursor: col-resize;
    user-select: none;
  }

  .gw-slider-container img {
    position: absolute; top: 0; left: 0;
    width: 100%; height: 100%;
    object-fit: cover; /* 確保填滿 */
    display: block; pointer-events: none;
  }

  .gw-overlay {
    position: absolute; top: 0; left: 0;
    width: 50%; height: 100%;
    overflow: hidden; z-index: 10;
    border-right: 2px solid white;
    will-change: width;
  }

  /* 【關鍵修改】這裡我們不寫死寬度，交給 JS 控制 */
  .gw-overlay-img {
    height: 100%;
    max-width: none !important; /* 解除限制 */
    /* width 由 JS 動態設定 */
  }

  /* 標籤與把手樣式 */
  .gw-handle {
    position: absolute; top: 50%; right: -15px;
    width: 30px; height: 30px;
    background: #fff; border-radius: 50%;
    z-index: 20; transform: translateY(-50%);
    display: flex; justify-content: center; align-items: center;
    box-shadow: 0 0 5px rgba(0,0,0,0.6); pointer-events: none;
  }
  .gw-handle::after { content: '< >'; font-size: 12px; font-weight: bold; color: #333; }
  
  .gw-label {
    position: absolute; top: 20px;
    background-color: rgba(0, 0, 0, 0.6); color: white;
    padding: 6px 12px; border-radius: 4px;
    font-size: 14px; font-weight: bold; pointer-events: none; white-space: nowrap; font-family: "Microsoft JhengHei", sans-serif;
  }
  .gw-label-left { left: 20px; z-index: 15; }
  .gw-label-right { right: 20px; z-index: 5; }
</style>
</head>
<body>

<div class="gw-slider-container" id="gwContainer">
  <img src="https://cdn.jsdelivr.net/gh/TsenWu/goldenway-photos/金鍏平板燈_GW555.jpg" alt="金鍏平板燈">
  <span class="gw-label gw-label-right">金鍏平板燈 (明亮)</span>

  <div class="gw-overlay" id="gwOverlay">
    <img src="https://cdn.jsdelivr.net/gh/TsenWu/goldenway-photos/市售平板燈頻閃光衰.webp" 
         alt="市售平板燈" 
         class="gw-overlay-img" id="gwOverlayImg">
    <span class="gw-label gw-label-left">市售平板燈 (頻閃)</span>
    <div class="gw-handle"></div>
  </div>
</div>

<script>
  var container = document.getElementById('gwContainer');
  var overlay = document.getElementById('gwOverlay');
  var overlayImg = document.getElementById('gwOverlayImg');

  // 【核心功能】讓左圖寬度永遠等於容器寬度 (像素級對齊)
  function syncImageWidth() {
    if(container.offsetWidth > 0) {
       overlayImg.style.width = container.offsetWidth + 'px';
    }
  }

  function move(x) {
    var rect = container.getBoundingClientRect();
    var posX = x - rect.left;
    if (posX < 0) posX = 0;
    if (posX > rect.width) posX = rect.width;
    overlay.style.width = posX + 'px';
  }

  // 監聽各種事件
  container.addEventListener('mousemove', function(e) { move(e.clientX); });
  container.addEventListener('touchmove', function(e) { move(e.touches[0].clientX); });
  
  // 當視窗大小改變 (RWD) 時，重新對齊
  window.addEventListener('resize', syncImageWidth);
  // 載入完成時對齊
  window.addEventListener('load', syncImageWidth);
  // 立即執行
  syncImageWidth();
</script>

</body>
</html>